<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>echarts-stock</title>
  <style>
    *{margin:0;padding:0;}
    HTML,HTML>BODY{width: 100%;height: 100%;}
    #stock{width: 100%;height: 100%;}
  </style>
</head>
<body>
  <div id="stock"></div>
  <script src="./../../zepto/dist/zepto.min.js"></script>
  <script src="./../../moment/moment.js"></script>
  <script src="./../../echarts/dist/echarts-en.min.js"></script>
  <script src="./../src/scripts/stock.js"></script>
  <script>
    
    $(function(){
      let s = new stock({ el:"#stock", 
                          option: {
                            title: {
                              text: "A公司股票"
                            }
                          }, 
                          data: [8, 9]
                      });
      s.draw();
    })

    // document.addEventListener("DOMContentLoaded", function(event) { 
    //   var s = new stock();
    //   s.draw();
    // });

    
    // const sData = s.getTimeLine();
    // const data = s.mockData(sData.length);

    // function getTimeLine(startTime=[9,30,0,0],endTime=[15,0,0,0],step = 1000*60,format='HH:mm',exclude=[{startTime:[11,31,0,0],endTime:[13,0,0,0]}]){
    //   // const TIME = new Date();
    //   // const data = [];
    //   // let sTime = TIME.setHours.apply(TIME,startTime);
    //   // let eTime = TIME.setHours.apply(TIME,endTime);
    //   // for(;sTime <= eTime; sTime = sTime + step){
    //   //   // moment(new Date().setHours.apply(new Date(),[0,0,0,90])).format('YYYY-MM-DD HH:mm:ss.SSS');
    //   //   data.push(moment(sTime).format(format));
    //   // }
    //   const excludeHash = hashExcludeTimeLine(exclude,step);
    //   // console.log(excludeHash.map(v=>moment(v).format(format)));
    //   const data = genTimeLine(startTime,endTime,step,excludeHash).map(v=>moment(v).format(format));

    //   return data;
    // }

    // function hashExcludeTimeLine(exclude,step){
    //   let data = [];
    //   for(let i=0,l=exclude.length;i<l;i++){
    //     data=data.concat(genTimeLine(exclude[i].startTime,exclude[i].endTime,step));
    //   }
    //   return data;
    // }

    // function genTimeLine(startTime,endTime,step, exclude = []) {
    //   const TIME = new Date();
    //   const data = [];
    //   let sTime = TIME.setHours.apply(TIME,startTime);
    //   let eTime = TIME.setHours.apply(TIME,endTime);
    //   for(;sTime <= eTime; sTime = sTime + step){
    //     if(exclude.indexOf(sTime) !== -1) continue;
    //     data.push(sTime);
    //   }
    //   return data;
    // }

    // document.addEventListener("DOMContentLoaded", function(event) { 
    //   var dom = document.getElementById("stock");
    //   var myChart = echarts.init(dom);
    //   // var app = {};
    //   option = null;
    //   option = {
    //       title: {
    //           text: '某支A股折线图',
    //           subtext: '纯属虚构',
    //           x:'center'
    //       },
    //       tooltip: {
    //           trigger: 'axis',
    //           axisPointer: {
    //               type: 'cross'
    //           }
    //       },
    //       toolbox: {
    //           show: true,
    //           feature: {
    //               saveAsImage: {}
    //           }
    //       },
    //       xAxis: {
    //           type: 'category',
    //           boundaryGap: false,
    //           axisLabel:{
    //             interval: (idx,val) =>{
    //               const data = s.getTimeLine(startTime=[9,30,0,0],endTime=[15,0,0,0],step = 1000*60*30,format='HH:mm',exclude=[{startTime:[12,0,0,0],endTime:[13,0,0,0]}]);
    //               return data.indexOf(val) !== -1;
    //             }
    //           },
    //           data: sData
    //       },
    //       yAxis: {
    //           type: 'value',
    //           axisLabel: {
    //               formatter: '{value} ¥'
    //           },
    //           axisPointer: {
    //               snap: true
    //           }
    //       },
    //       visualMap: {
    //           show: false,
    //           dimension: 1,
    //           pieces:[
    //             {
    //                 // type: 'piecewise',
    //                 "gte": data[0],
    //                 "label": ">= "+data[0],
    //                 "color": "green"
    //             }, {
    //                 "lt": data[0],
    //                 "gt": 0,
    //                 "label": "< "+data[0],
    //                 "color": "red"
    //             }
    //           ]
    //       },
    //       series: [
    //           {
    //               name: '股价',
    //               type: 'line',
    //               smooth: true,
    //               data:data,
    //           }
    //       ]
    //   };
    //   if (option && typeof option === "object") {
    //       myChart.setOption(option, true);
    //   }

    // });
  </script>
</body>
</html>